<!DOCTYPE html>
  <head>
      <meta charset="utf-8">
      <title>Source of : rhino_modules.jsdoc.tag.type.closureCompilerType.js</title>
      <style type="text/css">
          pre, code
          {
              white-space: pre-wrap;
          }
      </style>
      <script src="scripts/prettify/prettify.js"> </script>
      <!--[if lt IE 9]>
          <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
      <![endif]-->
      <link type="text/css" title="desert" rel="stylesheet" href="styles/desert.css">
      <link type="text/css" title="sunburst" rel="alternate stylesheet" href="styles/sunburst.css">
      <link type="text/css" title="prettify" rel="alternate stylesheet" href="styles/prettify.css">
  </head>
  <body>
      <pre class="prettyprint lang-js linenums">
/**
    @module jsdoc/tag/type/closureCompilerType

    @author Michael Mathews &lt;micmath@gmail.com>
    @author Jeff Williams &lt;jeffrey.l.williams@gmail.com>
    @license Apache License 2.0 - See file 'LICENSE.md' in this project.
 */

function parseOptional(type) {
    var optional = null;

    // {sometype=} means optional
    if ( /(.+)=$/.test(type) ) {
        type = RegExp.$1;
        optional = true;
    }

    return { type: type, optional: optional };
}

function parseNullable(type) {
    var nullable = null;

    // {?sometype} means nullable, {!sometype} means not-nullable
    if ( /^([\?\!])(.+)$/.test(type) ) {
        type = RegExp.$2;
        nullable = (RegExp.$1 === '?')? true : false;
    }

    return { type: type, nullable: nullable };
}

function parseVariable(type) {
    var variable = null;

    // {...sometype} means variable number of that type
    if ( /^(\.\.\.)(.+)$/.test(type) ) {
        type = RegExp.$2;
        variable = true;
    }

    return { type: type, variable: variable };
}

/**
    Extract Closure Compiler-style type information from the tag info.
    @param {object} tagInfo Hash with name, type, and text properties.
    @return {object} Hash with name, type, text, optional, nullable, variable, and default properties.
 */
exports.parse = function(tagInfo) {
    var optional = parseOptional(tagInfo.type),
        nullable = parseNullable(tagInfo.type),
        variable = parseVariable(tagInfo.type);

    return {
        name: tagInfo.name,
        type: variable.type || nullable.type || optional.type,
        text: tagInfo.text,
        optional: tagInfo.optional || optional.optional, // don't override if already true
        nullable: nullable.nullable,
        variable: variable.variable,
        defaultvalue: tagInfo.defaultvalue
    };
};

      </pre>
      <script>prettyPrint();</script>
  </body>
</html>