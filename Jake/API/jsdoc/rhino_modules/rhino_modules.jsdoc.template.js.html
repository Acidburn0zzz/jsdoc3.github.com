<!DOCTYPE html>
  <head>
      <meta charset="utf-8">
      <title>Source of : rhino_modules.jsdoc.template.js</title>
      <style type="text/css">
          pre, code
          {
              white-space: pre-wrap;
          }
      </style>
      <script src="scripts/prettify/prettify.js"> </script>
      <!--[if lt IE 9]>
          <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
      <![endif]-->
      <link type="text/css" title="desert" rel="stylesheet" href="styles/desert.css">
      <link type="text/css" title="sunburst" rel="alternate stylesheet" href="styles/sunburst.css">
      <link type="text/css" title="prettify" rel="alternate stylesheet" href="styles/prettify.css">
  </head>
  <body>
      <pre class="prettyprint lang-js linenums">
/**
 * @file Wrapper for underscore's template utility to allow loading templates from files.
 * @author RafaÅ‚ Wrzeszcz &lt;rafal.wrzeszcz@wrzasq.pl>
 * @author &lt;a href="mailto:matthewkastor@gmail.com">Matthew Christopher Kastor-Inare III&lt;/a>
 * @license Apache License 2.0 - See file 'LICENSE.md' in this project.
 */

var _ = require('underscore'),
    fs = require('fs'),
    path = require('path');


/**
    @module jsdoc/template
 */

/**
    @class
    @classdesc Underscore template helper.
    @param {string} path - Templates directory.
 */
exports.Template = function(path) {
    this.path = path;
    this.layout = null;
    this.cache = {};
    // override default template tag settings
    this.settings = {
        evaluate   : /&lt;\?js([\s\S]+?)\?>/g,
        interpolate: /&lt;\?js=([\s\S]+?)\?>/g,
        escape     : /&lt;\?js~([\s\S]+?)\?>/g
    };

};

/** Loads template from given file.
    @param {string} file - Template filename.
    @return {function} Returns template closure.
 */
exports.Template.prototype.load = function(file) {
    var _path = path.join(this.path, file);
    return _.template(fs.readFileSync(_path), null, this.settings);
};


/**
    Renders template using given data.
    
    This is low-level function, for rendering full templates use {@link Template.render()}.
    
    @param {string} file - Template filename.
    @param {object} data - Template variables (doesn't have to be object, but passing variables dictionary is best way and most common use).
    @return {string} Rendered template.
 */
exports.Template.prototype.partial = function(file, data) {
    // load template into cache
    if (!(file in this.cache)) {
        this.cache[file] = this.load(file);
    }

    // keep template helper context
    return this.cache[file].call(this, data);
};

/**
    Renders template with given data.
    
    This method automaticaly applies layout if set.
    
    @param {string} file - Template filename.
    @param {object} data - Template variables (doesn't have to be object, but passing variables dictionary is best way and most common use).
    @return {string} Rendered template.
 */
exports.Template.prototype.render = function(file, data) {
    // main content
    var content = this.partial(file, data);

    // apply layout
    if (this.layout) {
        data.content = content;
        content = this.partial(this.layout, data);
    }

    return content;
};

      </pre>
      <script>prettyPrint();</script>
  </body>
</html>