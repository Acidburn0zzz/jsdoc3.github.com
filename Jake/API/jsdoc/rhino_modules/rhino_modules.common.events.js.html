<!DOCTYPE html>
  <head>
      <meta charset="utf-8">
      <title>Source of : rhino_modules.common.events.js</title>
      <style type="text/css">
          pre, code
          {
              white-space: pre-wrap;
          }
      </style>
      <script src="scripts/prettify/prettify.js"> </script>
      <!--[if lt IE 9]>
          <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
      <![endif]-->
      <link type="text/css" title="desert" rel="stylesheet" href="styles/desert.css">
      <link type="text/css" title="sunburst" rel="alternate stylesheet" href="styles/sunburst.css">
      <link type="text/css" title="prettify" rel="alternate stylesheet" href="styles/prettify.css">
  </head>
  <body>
      <pre class="prettyprint lang-js linenums">
/**
    Functions related to events. Designed to be mixed into other classes.
    @exports common/events
    @author Michael Mathews &lt;micmath@gmail.com>
    @license Apache License 2.0 - See file 'LICENSE.md' in this project.
*/
module.exports = {
    /**
        @param {string} type
        @param {function} handler
        @returns {this}
    */
    on: function(type, handler, context) {
        if ( !type ||  !handler ) {
            return;
        }
        if ( !context ) { context = this; }
        
        if ( !this.__bindings ) { this.__bindings = {}; }
        // TODO check here for hasOwnProperty?
        if ( !this.__bindings[type] ) { this.__bindings[type] = []; }
        
        var call = function(e) {
            return handler.call(context, e);
        };
        this.__bindings[type].push( {handler: handler, call: call} );
        
        return this; // chainable
    },
    
    /**
        @param {string} type
        @param {object} [eventData]
        @returns {this}
    */
    fire: function(eventType, eventData) {
        if ( !eventType || !this.__bindings || !this.__bindings[eventType] ) {
            return;
        }
        
        // run handlers in first-in-first-run order
        for (var i = 0, leni = this.__bindings[eventType].length; i &lt; leni; i++) {
            if ( false === this.__bindings[eventType][i].call(eventData) ) {
                if (eventData) { eventData.defaultPrevented = true; }
            }
        }
        
        return this; // chainable
    },
    
    /**
        @param {string} type
        @param {function} handler
    */
    removeListener: function(type, handler) {
        if ( !type ||  !handler || !this.__bindings || !this.__bindings[type] ) {
            return;
        }
        
        var i = this.__bindings[type].length;
        while ( i-- ) {
            if ( this.__bindings[type][i].handler === handler ) {
                this.__bindings[type].splice(i, 1);
            }
        }
        
        if (this.__bindings[type].length === 0) {
            delete this.__bindings[type];
        }
    }
};
      </pre>
      <script>prettyPrint();</script>
  </body>
</html>