<!DOCTYPE html>
  <head>
      <meta charset="utf-8">
      <title>Source of : rhino_modules.jsdoc.src.scanner.js</title>
      <style type="text/css">
          pre, code
          {
              white-space: pre-wrap;
          }
      </style>
      <script src="scripts/prettify/prettify.js"> </script>
      <!--[if lt IE 9]>
          <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
      <![endif]-->
      <link type="text/css" title="desert" rel="stylesheet" href="styles/desert.css">
      <link type="text/css" title="sunburst" rel="alternate stylesheet" href="styles/sunburst.css">
      <link type="text/css" title="prettify" rel="alternate stylesheet" href="styles/prettify.css">
  </head>
  <body>
      <pre class="prettyprint lang-js linenums">
/**
    @module jsdoc/src/scanner
    @requires module:fs
    
    @author Michael Mathews &lt;micmath@gmail.com>
    @license Apache License 2.0 - See file 'LICENSE.md' in this project.
 */


var fs = require('fs');

/**
    @constructor
    @mixes module:events
 */
exports.Scanner = function() {};
exports.Scanner.prototype = Object.create( require('events').EventEmitter.prototype );

/**
    Recursively searches the given searchPaths for js files.
    @param {Array.&lt;string>} searchPaths
    @param {number} [depth=1]
    @fires sourceFileFound
 */
exports.Scanner.prototype.scan = function(searchPaths, depth, filter) {
    var filePaths = [],
        self = this;

    searchPaths = searchPaths || [];
    depth = depth || 1;

    searchPaths.forEach(function($) {
        var filepath = decodeURIComponent($);
        if ( fs.statSync(filepath).isFile() ) {
            filePaths.push(filepath);
        }
        else {
            filePaths = filePaths.concat(fs.ls(filepath, depth));
        }
    });
    
    filePaths = filePaths.filter(function($) {
        return filter.isIncluded($);
    });
    
    filePaths = filePaths.filter(function($) {
        var e = { fileName: $ };
        self.emit('sourceFileFound', e);
        
        return !e.defaultPrevented;
    });

    return filePaths;
};

      </pre>
      <script>prettyPrint();</script>
  </body>
</html>