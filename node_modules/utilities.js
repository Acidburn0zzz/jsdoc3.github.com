/*jslint indent: 4, maxerr: 50, white: true, node: true, stupid: true, sloppy: true */

/**
 * @file This file contains various utilities.
 * @author <a href="matthewkastor@gmail.com">Matthew Kastor</a>
 * @version 20121030
 * @requires fs
 * @exports directory
 */

var fs, path, directory;

fs = require('fs');
path = require('path');

/**
 * Contains utilites used on directories.
 * @namespace
 */
directory = {};

/**
 * Filters a directory listing.
 * @function
 * @param {String} dir The directory to look in.
 * @param {Function} filt The filter function will be given each file's
 *  name. Filenames will be returned if the filter returns true for the
 *  given file name.
 * @returns {Array} Returns an array of file names based on the provided filter.
 */
directory.filterList = function filterList(dir, filt) {
    var filesArray, dir;
    
    filesArray = [];
    
    dir = path.resolve(dir);
    try {
        fs.readdirSync(dir).forEach(function (file) {
            if (filt(file) === true) {
                filesArray.push(file);
            }
        });
    } catch(err) {
        console.log('There was an error accessing files.');
    }
    return filesArray;
}

exports.directory = directory;