<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    
    <meta name="description" content="How to create customized templates for JSDoc 3.">
    
    
    <title>Use JSDoc: JSDoc 3 Template Reference</title>
    
    <link rel="stylesheet" href="lib/prettify.css" />
    <script src="lib/prettify.js"></script>
    
    <script type="text/javascript">
        /* Make HTML 5 elements stylable in IE */
        document.createElement('header');
        document.createElement('nav');
        document.createElement('article');
        document.createElement('footer');
        document.createElement('hgroup');
    </script>
    
    <style>
        body 
        {
            font: 1em 'Helvetica Neue', Helvetica, Arial, sans-serif;
            padding: 0;
            margin: 0;
        }
        
        a, a:visited, a:active 
        {
            color: #605C89;
        }
        
        /* Make HTML 5 elements display block-level for consistent styling */
        header, nav, article, footer, address 
        {
            display: block;
        }
        
        header
        {
            background-color: #EBEBEB;
            color: #006FBB;
            margin: 0;
            margin-bottom: 32px;
            padding: 18px;
            font-size: 2.4em;
            font-weight: bold;
            border-bottom: 1px #C6C6C6 solid;
        }
        
        header a, header a:visited 
        {
            color: #006FBB;
            text-decoration: none;
        }
        
        article 
        {
            margin: 18px;
        }
        
        footer
        {
            margin: 16px;
            margin-top: 32px;
            font-style: italic;
            font-size: 0.8em;
        }
        
        h1, h2, h3, h4, h5, h6
        {
            color: #B93A38;
        }
        
        h1
        {
            font-size: 1.428em;
            text-indent: 0;
        }

        h2
        {
            font-size: 1.285em;
            text-indent: 1%;
        }

        h3
        {
            font-size: 1.142em;
            text-indent: 2%;
        }

        h4
        {
            font-size: 1em;
            text-indent: 3%;
        }

        h5
        {
            font-size: 0.857em;
            text-indent: 4%;
        }

        h6
        {
            font-size: 0.714em;
            text-indent: 5%;
        }
        
        p
        {
            text-indent: 2%;
        }
        
        dl
        {
            margin-left: 2%;
            padding-left: 0;
        }
        
        dt
        {
            margin-left: 16px;
            padding-left: 4px;
            margin-top: 8px;
        }
        
        dt a, dt a:visited 
        {
            color: #3E00B6;
        }
        
        dd
        {
            margin-left: 16px;
            padding-left: 4px;
        }
        
        ol, ul
        {
            margin-left: 2%;
        }
        
        code 
        {
            font: 1em Consolas, "Lucida Console", Monaco, monospace;
            background-color: #DEDEDE;
        }
        
        pre
        {
            display: block;
            border: 1px solid #999;
            margin: 12px;
            padding: 8px;
            white-space: pre-wrap;
            background-color: #DEDEDE;
        }
        
        .example dt 
        {
            font-weight: bold;
        }
        
        .tags-definition {
            margin: 0px 1%;
        }
        
        .tags-definition th {
            text-align: left;
            vertical-align: top;
            font-weight: 800;
            background-color: gold;
        }
        
        .tags-definition td {
            text-align: left;
            vertical-align: top;
        }

    </style>
</head>

<body>
    <header>
        <a href="./index.html">@use JSDoc</a><br>
        <span style="font-size: 0.5em; margin-left: 6%;"><a href="http://usejsdoc.org/index.html">The best documentation tool for JavaScript, ever.&trade;</a></span>
    </header>
    
    <nav>
    </nav>
    
    <article>
    <h1>JSDoc 3 Template Reference</h1>
    

<div class="about-overview" id="templates-overview">
<ol>
    <li>
        <a href="#The_basics">The basics</a>
        <ol>
            <li>
                <a href="#Barebones_Example">Barebones Example</a>
            </li>
        </ol>
    </li>

    <li>
        <a href="#Intermediate_Examples">Intermediate Examples</a>
        <ol>
            <li>
                <a href="#Generating_HTML_Using_Template_Strings">Generating HTML Using Template Strings</a>
            </li>

            <li>
                <a href="#Generating_HTML_Using_Template_Files">Generating HTML Using Template Files</a>
            </li>
        </ol>
    </li>

    <li>
        <a href="#More_Info">More Info</a>
    </li>
</ol>

<h2 name="The_basics"
    id="The_basics">
    The basics
</h2>

<p>
    To invoke JSDoc 3 with your own template, use the <code>-t</code> or <code>--template</code> command line option, giving it the path to your template folder.
</p>

<p>
    <b>Usage</b>
</p>

<dl class="example">
<dt>Example : about-templates-0.js</dt>
<dd>
<pre class="prettyprint lang-js">

./jsdoc mycode.js -t /path/to/mycooltemplate

</pre>
</dd>
</dl>
<p>
    If you've installed (copied) the template into the templates folder, then you can specify a short path like the following.
</p>

<p>
    <b>Usage</b>
</p>

<dl class="example">
<dt>Example : about-templates-1.js</dt>
<dd>
<pre class="prettyprint lang-js">

./jsdoc mycode.js --template templates/default

</pre>
</dd>
</dl>
<h3 name="Barebones_Example"
    id="Barebones_Example">
    Barebones Example
</h3>

<p>
    To create or use your own template, create a folder, and give it the name of your template, for example "mycooltemplate". Within this folder create a file named "publish.js". That file must export a method named "publish".
</p>

<p>
    <b>Barebones Example - console.log</b>
</p>

<dl class="example">
<dt>Example : about-templates-2.js</dt>
<dd>
<pre class="prettyprint lang-js">

/**
 * Turn the data about your docs into file output.
 * @param {TAFFY} data A TaffyDB collection representing
 *                       all the symbols documented in your code.
 * @param {object} opts An object with options information.
 * @param {Tutorial} tutorialResolverRoot An object with information about included tutorials
 * @see http://www.taffydb.com/
 * @see http://www.taffydb.com/workingwithdata
 * @see http://underscorejs.org/#template
 * @see http://nodejs.org/api/fs.html
 * @see http://nodejs.org/api/path.html
 */
exports.publish = function(data, opts, tutorialResolverRoot) {
    
    // do stuff here to generate your output files
    
    console.log('-------- data() --------');
    console.log(data());
    console.log('-------- opts --------');
    console.log(opts);
    console.log('-------- tutorialResolverRoot --------');
    console.log(tutorialResolverRoot);
    console.log('-------- data().get() --------');
    console.log(data().get());

};

</pre>
</dd>
</dl>
<p>
    <b>Note that:</b>
</p>

<ul>
    <li>Templating is handled by underscore by default. See: <a target="_blank"
            href="http://underscorejs.org/#template">http://underscorejs.org/#template</a>
    </li>

    <li>The data passed to your publish function is a TaffyDB database. See: <a target="_blank"
            href="http://www.taffydb.com/workingwithdata">http://www.taffydb.com/workingwithdata</a>
    </li>

    <li>Helper functions for the included underscore template module are located at <code>jsdoc/rhino_modules/jsdoc/template.js</code> Using this will allow you to load templates from files.
    </li>

    <li>Filesystem functions are available in <code>jsdoc/rhino_modules/fs.js</code> See: <a target="_blank"
            href="http://nodejs.org/api/fs.html">http://nodejs.org/api/fs.html</a>
    </li>

    <li>Functions for dealing with paths are available in <code>jsdoc/rhino_modules/path.js</code> See: <a target="_blank"
            href="http://nodejs.org/api/path.html">http://nodejs.org/api/path.html</a>
    </li>

    <li>Helper functions are available at <code>jsdoc/rhino_modules/jsdoc/util/templateHelper.js</code> Using this, you will be able to sort and filter the data from JSDoc easily.
    </li>
</ul>

<h2 name="Intermediate_Examples"
    id="Intermediate_Examples">
    Intermediate Examples
</h2>

<p>
    <b>A More Complex Example - Writing Data to a File</b>
</p>

<dl class="example">
<dt>Example : about-templates-3.js</dt>
<dd>
<pre class="prettyprint lang-js">

/**
 * Turn the data about your docs into file output.
 * @param {TAFFY} data A TaffyDB collection representing
 *                       all the symbols documented in your code.
 * @param {object} opts An object with options information.
 * @param {Tutorial} tutorialResolverRoot An object with information about included tutorials
 * @see http://www.taffydb.com/
 * @see http://www.taffydb.com/workingwithdata
 * @see http://underscorejs.org/#template
 * @see http://nodejs.org/api/fs.html
 * @see http://nodejs.org/api/path.html
 */
exports.publish = function(data, opts, tutorialResolverRoot) {
    
    var outputFile   = '/tmp.txt';
    var fs           = require('fs');
    var path         = require('path');
    var outputDir    = path.resolve(opts.destination);
    var outputContent= JSON.stringify(data().first(), null, '    ');
    
    // replacing all backslashes with forward slashes in the path 
    // this avoids a few issues on Windows.
    outputDir        = outputDir.replace(/\\/g, '/');
    // removing any trailing slash
    outputDir        = outputDir.replace(/\/+$/, '');
    
    outputFile       = outputDir + outputFile;
    
    fs.mkPath(outputDir);
    fs.writeFileSync(outputFile, outputContent);

};

</pre>
</dd>
</dl>
<h3 name="Generating_HTML_Using_Template_Strings"
    id="Generating_HTML_Using_Template_Strings">
    Generating HTML Using Template Strings
</h3>

<p>
    <b>An Even More Complex Example - Using Templates to Generate HTML</b>
</p>

<dl class="example">
<dt>Example : about-templates-4.js</dt>
<dd>
<pre class="prettyprint lang-js">

/**
 * Turn the data about your docs into file output.
 * @param {TAFFY} data A TaffyDB collection representing
 *                       all the symbols documented in your code.
 * @param {object} opts An object with options information.
 * @param {Tutorial} tutorialResolverRoot An object with information about included tutorials
 * @see http://www.taffydb.com/
 * @see http://www.taffydb.com/workingwithdata
 * @see http://underscorejs.org/#template
 * @see http://nodejs.org/api/fs.html
 * @see http://nodejs.org/api/path.html
 */
exports.publish = function(data, opts, tutorialResolverRoot) {
    
    var outputFile   = '/tmp.html';
    var fs           = require('fs');
    var path         = require('path');
    var outputDir    = path.resolve(opts.destination);
    var outputContent= JSON.stringify(data().first(), null, '    ');
    
    
    var helper          = require('jsdoc/util/templateHelper');
    var templateStr     = '';
    var templateData    = {};
    // only handles templates as strings.
    var renderTemplate  = require('underscore').template;
    var templateSettings= {};
    
    templateStr  = '\n';
    templateStr += '

</pre>
</dd>
</dl>
<html>
    <body>
        \n'; templateStr += '\n\n\n'; templateStr += '\n

<dl class="example">
<dt>Example : about-templates-5.js</dt>
<dd>
<pre class="prettyprint lang-js">

&lt;?js= outputContent ?>

</pre>
</dd>
</dl>
\n\n'; templateStr += '\n'; templateData.outputContent = helper.htmlsafe(outputContent); // override default settings, this is done in // jsdoc/rhino_modules/jsdoc/template as well. // It is used to define the template "tags". // Have a look at some of the default template // files to get an idea of what you can do. templateSettings.evaluate = /&lt;\?js([\s\S]+?)\?&gt;/g; templateSettings.interpolate= /&lt;\?js=([\s\S]+?)\?&gt;/g; templateSettings.escape = /&lt;\?js~([\s\S]+?)\?&gt;/g; outputContent = renderTemplate(templateStr, templateData, templateSettings); // replacing all backslashes with forward slashes in the path // this avoids a few issues on Windows. outputDir = outputDir.replace(/\\/g, '/'); // removing any trailing slash outputDir = outputDir.replace(/\/+$/, ''); outputFile = outputDir + outputFile; fs.mkPath(outputDir); fs.writeFileSync(outputFile, outputContent); };
        <h3 name="Generating_HTML_Using_Template_Files"
            id="Generating_HTML_Using_Template_Files">
            Generating HTML Using Template Files
        </h3>

        <p>
            This next example shows how to load template files. This will make it easier for you to transform the data into something presentable, without making a huge mess trying to write out a template in escaped JavaScript strings. This example requires several files in order to function. The most important of which are <code>publish.js</code> and <code>layout.tmpl</code>. With just these two files you'll be able to generate pages containing data from JSDoc 3. With just a little css and maybe some JavaScript, your documentation can come alive. The full example can be downloaded <a href="downloads/simpleTemplate.zip">here</a>.
        </p>

        <p>
            <b>simpleTemplate Directory Tree</b>
        </p>

<dl class="example">
<dt>Example : about-templates-6.js</dt>
<dd>
<pre class="prettyprint lang-js">

\---templates
    \---simpleTemplate
        |   publish.js
        |
        +---static
        |   +---scripts
        |   |   \---prettify
        |   |           Apache-License-2.0.txt
        |   |           prettify.js
        |   |
        |   \---styles
        |           desert.css
        |           prettify.css
        |           sunburst.css
        |
        \---tmpl
                layout.tmpl

</pre>
</dd>
</dl>
        <p>
            <b>Note that if you want to run this example you'll need to create the directory structure shown above, or just download the example and play with it.</b> You can get away with not having any of the files besides <code>publish.js</code> and <code>layout.tmpl</code> but you'll need the folders.
        </p>

        <p>
            <b>templates/simpleTemplate/publish.js</b>
        </p>

<dl class="example">
<dt>Example : about-templates-7.js</dt>
<dd>
<pre class="prettyprint lang-js">

/**
 * @file A simple template to get an idea of where to start.
 * @author &lt;a href="mailto:matthewkastor@gmail.com">Matthew Kastor&lt;/a>
 */
 
/**
 * Recursively copies a directory and files to user specified depth.
 * @param {String} sourceDirectory The directory to copy.
 * @param {String} outputDirectory The output directory.
 * @param {Number} recursionDepth How many folders deep the copy will go.
 */
function copyDirectory(sourceDirectory, outputDirectory, recursionDepth) {
    var fs   = require('fs');
    var path = require('path');
    recursionDepth = recursionDepth || 3;
    var staticFiles = fs.ls(sourceDirectory, recursionDepth);
    staticFiles.forEach(function(fileName) {
        var toDir = fs.toDir(fileName.replace(sourceDirectory, outputDirectory));
        fs.mkPath(toDir);
        if(!fs.existsSync(path.join(toDir, '/' + fileName))) {
            fs.copyFileSync(fileName, toDir);
        }
    });
}

/**
 * Turn the data about your docs into file output.
 * @param {TAFFY} data A TaffyDB collection representing
 *                       all the symbols documented in your code.
 * @param {object} opts An object with options information.
 * @param {Tutorial} tutorialResolverRoot An object with information about included tutorials
 * @see http://www.taffydb.com/
 * @see http://www.taffydb.com/workingwithdata
 * @see http://underscorejs.org/#template
 * @see http://nodejs.org/api/fs.html
 * @see http://nodejs.org/api/path.html
 */
exports.publish = function(data, opts, tutorialResolverRoot) {
    var fs                     = require('fs');
    var path                   = require('path');
    var helper                 = require('jsdoc/util/templateHelper');
    var template               = require('jsdoc/template');
    
    var outputFileName         = data().first().meta.filename;
    var sourceCode             = JSON.stringify(data().first(), null, '    ');
    var outputDirectory        = path.resolve(opts.destination);
    var staticFilesDirectory   = path.resolve(env.dirname + '/templates/simpleTemplate/static');
    var outputFile             = path.join(outputDirectory, outputFileName + '.html');
    
    var templatePath           = path.resolve(env.dirname + '/templates/simpleTemplate');
    var temmplateFilesDirectory= path.join(templatePath, '/tmpl');
    var templateName           = 'layout.tmpl';
    var templateData           = {};
    
    templateData.title         = 'Source of : ' + outputFileName;
    templateData.sourceCode    = helper.htmlsafe(sourceCode);
    
    var view                   = new template.Template(temmplateFilesDirectory);
    var outputContent          = view.render(templateName, templateData);
    
    fs.mkPath(outputDirectory);
    fs.writeFileSync(outputFile, outputContent);
    copyDirectory(staticFilesDirectory, outputDirectory, 3);
};

</pre>
</dd>
</dl>
        <p>
            <b>templates/simpleTemplate/tmpl/layout.tmpl</b>
        </p>

<dl class="example">
<dt>Example : about-templates-8.js</dt>
<dd>
<pre class="prettyprint lang-js">

&lt;head>
    &lt;meta charset="utf-8">
    &lt;title>
        &lt;?js= title ?>
        &lt;/title>
    &lt;style type="text/css">
    pre, code
    {
      white-space: pre-wrap;
    }
    &lt;/style>
    &lt;script src="scripts/prettify/prettify.js"
          type="text/javascript">
    &lt;/script>
    &lt;!--[if lt IE 9]>
  &lt;script src="//html5shiv.googlecode.com/svn/trunk/html5.js">&lt;/script>
      &lt;![endif]-->
    &lt;link type="text/css"
          title="desert"
          rel="stylesheet"
          href="styles/desert.css">
    &lt;link type="text/css"
          title="sunburst"
          rel="alternate stylesheet"
          href="styles/sunburst.css">
    &lt;link type="text/css"
          title="prettify"
          rel="alternate stylesheet"
          href="styles/prettify.css">
&lt;/head>
&lt;body>
    &lt;pre class="prettyprint lang-js linenums">
        &lt;?js= sourceCode ?>
    &lt;/pre>
    &lt;script type="text/javascript">
        prettyPrint();
    &lt;/script>

</pre>
</dd>
</dl>
            <h2 name="More_Info"
                id="More_Info">
                More Info
            </h2>

            <p>
                Hopefully after reading everything above you'll be able to start using the <code>data</code> provided by JSDoc 3. Now that you've got some sense of how to read and write with templates, take a look at the default template and see how it builds up a coherent set of documents from the <code>data</code>.
            </p>
        </body>
    </body>
</html>
</div>
    </article>
    
    <footer>
        <img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/80x15.png" /><br>
        Copyright &#169; 2012 The <a href="http://usejsdoc.org/contribute-contributors.html">contributors</a> to the JSDoc 3 user guides project<br>
        This site is <a href="https://github.com/jsdoc3/jsdoc3.github.com">open source</a> and licensed under the <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.
    </footer>

    <script>prettyPrint()</script>
</body>
</html>
